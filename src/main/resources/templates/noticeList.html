<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>공지사항 글 목록</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/boardList.css">
</head>
<body>
    <div class="wrapper">
        <header class="header">
            <nav class="header_bar">
                <a href="/main" class="logo"><img src="/img/talkTown.png"></a>
                <div class="header_icons">
                    <a href="/myPage" class="myPage" title ="myPage" sec:authorize="isAuthenticated()" ><img src="/img/myPage.png"></a>
                    <a href="/login" class="login"title="login" sec:authorize="isAnonymous()"><img src ="/img/login.png"></a>
                    <form method="post" class="logout_form" action="/api/logout" sec:authorize="isAuthenticated()">
                        <button type="submit" class="logout" title="logout" id="logout_btn">
                            <img src="/img/logout.png">
                        </button>
                    </form>
                </div>
            </nav>
            <nav class="menu_bar">
                <ul>
                    <li><a href="/boards" >Community</a></li>
                    <li><a href="/notices">Notice</a></li>
                    <li th:if="${#authorization.expression('hasRole(''ADMIN'')')}" ><a href="/admin">Admin</a></li>
                </ul>
            </nav>
        </header>
        <div class="container">
            <span class="page_title">NOTICE</span>
            <div class="notice_list">
                <div class="search">
                    <form th:action="@{/notices}" method="get">
                        <select name="type" class="search_type">
                            <option value="title">제목</option>
                            <option value="author">작성자</option>
                            <option value="content">내용</option>
                        </select>
                        <input type="text" name="keyword" placeholder="search" style="height:35px; border: 1px solid rgb(170, 170, 170); border-radius: 5px;">
                    </form>
                </div>
                <table class="table">
                    <thead>
                        <tr style="border-bottom: 1px solid rgb(199, 199, 199); border-top: 2px solid black; padding:10px;">
                            <th class="header_cell id">No</th>
                            <th class="header_cell title">Title</th>
                            <th class="header_cell author">Author</th>
                            <th class="header_cell date">Date</th>
                            <th class="header_cell views">Views</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="notice : ${notices}" style="border-bottom: 1px solid rgb(199, 199, 199);">
                            <td class="body_cell id" th:text="${notice.id}" style="padding:30px;"></td>
                            <td class="body_cell title" style="padding: 30px; white-space: nowrap;  overflow: hidden; text-overflow: ellipsis;"><a th:href="@{/notices/{id}(id=${notice.id})}" th:text="${notice.title}" class="title"></a></td>
                            <td class="body_cell author" th:text="${notice.author}"></td>
                            <td class="body_cell date" th:text="|${#temporals.format(notice.createdAt, 'yyyy-MM-dd')}|"></td>
                            <td class="body_cell views" th:text="${notice.views}">0</td>
                        </tr>
                    </tbody>
                </table>
                <div class="write_button">
                    <button id="create_btn" th:if="${#authorization.expression('hasRole(''ADMIN'')')}" th:onclick="|location.href='@{/createNotice}'|" >Write</button>
                </div>
                <div class="pagination">
                    <div th:each="page : ${#numbers.sequence(startPage, endPage)}" >
                        <a th:if="${page != nowPage}" th:href="@{/notices(page=${page-1})}" th:text="${page}"></a>
                        <span th:if="${page == nowPage}" th:text="${page}"></span>
                    </div>
                </div>
            </div>
        </div>
        <footer>
            <div class="footer">
                <img src="/img/talkTown.png">
                <p>© 2025 TalkTown. All rights reserved</p>
            </div>
        </footer>
    </div>
<script src="/js/logout.js"></script>
</body>
</html>